<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Unit 2.4a Using Programs with Data, SQLAlchemy | Alan’s Fastpages</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<meta property="og:description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<link rel="canonical" href="https://a1234l.github.io/VSCode-Fastpages/jupyter/week%2026/2023/03/13/AP-unit2-4a.html" />
<meta property="og:url" content="https://a1234l.github.io/VSCode-Fastpages/jupyter/week%2026/2023/03/13/AP-unit2-4a.html" />
<meta property="og:site_name" content="Alan’s Fastpages" />
<meta property="og:image" content="https://a1234l.github.io/VSCode-Fastpages/images/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-13T00:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://a1234l.github.io/VSCode-Fastpages/images/python.png" />
<meta property="twitter:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-13T00:00:00-05:00","datePublished":"2023-03-13T00:00:00-05:00","description":"Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style,","headline":"Unit 2.4a Using Programs with Data, SQLAlchemy","image":"https://a1234l.github.io/VSCode-Fastpages/images/python.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://a1234l.github.io/VSCode-Fastpages/jupyter/week%2026/2023/03/13/AP-unit2-4a.html"},"url":"https://a1234l.github.io/VSCode-Fastpages/jupyter/week%2026/2023/03/13/AP-unit2-4a.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/VSCode-Fastpages/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://a1234l.github.io/VSCode-Fastpages/feed.xml" title="Alan's Fastpages" /><link rel="shortcut icon" type="image/x-icon" href="/VSCode-Fastpages/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/VSCode-Fastpages/">Alan&#39;s Fastpages</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/VSCode-Fastpages/_pages/01_Notes.html">Notes and Student Lessons</a><a class="page-link" href="/VSCode-Fastpages/_pages/02_Vocab.html">Vocab</a><a class="page-link" href="/VSCode-Fastpages/_pages/03_AP_World.html">AP World</a><a class="page-link" href="/VSCode-Fastpages/_pages/04_Frontend.html">Frontend</a><a class="page-link" href="/VSCode-Fastpages/about/">About Me</a><a class="page-link" href="/VSCode-Fastpages/search/">Search</a><a class="page-link" href="/VSCode-Fastpages/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Unit 2.4a Using Programs with Data, SQLAlchemy</h1><p class="page-description">Using Programs with Data is focused on SQL and database actions.  Part A focuses on SQLAlchemy and an OOP programming style,</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-03-13T00:00:00-05:00" itemprop="datePublished">
        Mar 13, 2023
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      10 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/VSCode-Fastpages/categories/#jupyter">jupyter</a>
        &nbsp;
      
        <a class="category-tags-link" href="/VSCode-Fastpages/categories/#Week 26">Week 26</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/A1234l/VSCode-Fastpages/tree/master/_notebooks/2023-03-13-AP-unit2-4a.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/VSCode-Fastpages/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/A1234l/VSCode-Fastpages/master?filepath=_notebooks%2F2023-03-13-AP-unit2-4a.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/VSCode-Fastpages/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/A1234l/VSCode-Fastpages/blob/master/_notebooks/2023-03-13-AP-unit2-4a.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/VSCode-Fastpages/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2FA1234l%2FVSCode-Fastpages%2Fblob%2Fmaster%2F_notebooks%2F2023-03-13-AP-unit2-4a.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/VSCode-Fastpages/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#Database-and-SQLAlchemy">Database and SQLAlchemy </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Imports-and-Flask-Objects">Imports and Flask Objects </a></li>
<li class="toc-entry toc-h2"><a href="#Model-Definition">Model Definition </a></li>
<li class="toc-entry toc-h2"><a href="#Initial-Data">Initial Data </a></li>
<li class="toc-entry toc-h2"><a href="#Extra-Notes">Extra Notes </a></li>
<li class="toc-entry toc-h2"><a href="#Check-for-given-Credentials-in-users-table-in-sqlite.db">Check for given Credentials in users table in sqlite.db </a></li>
<li class="toc-entry toc-h2"><a href="#Create-a-new-User-in-table-in-Sqlite.db">Create a new User in table in Sqlite.db </a></li>
<li class="toc-entry toc-h2"><a href="#Reading-users-table-in-sqlite.db">Reading users table in sqlite.db </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Hacks">Hacks </a></li>
<li class="toc-entry toc-h1"><a href="#Update-Functionality">Update Functionality </a></li>
<li class="toc-entry toc-h1"><a href="#Delete-Functionality">Delete Functionality </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-03-13-AP-unit2-4a.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Database-and-SQLAlchemy">
<a class="anchor" href="#Database-and-SQLAlchemy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database and SQLAlchemy<a class="anchor-link" href="#Database-and-SQLAlchemy"> </a>
</h1>
<blockquote>
<p>In this blog we will explore using programs with data, focused on Databases.  We will use SQLite Database to learn more about using Programs with Data.  <strong><em>Use Debugging through these examples to examine Objects created in Code</em></strong>.</p>
</blockquote>
<ul>
<li>
<p>College Board talks about ideas like</p>
<ul>
<li>Program Usage. "iterative and interactive way when processing information"</li>
<li>Managing Data.  "classifying data are part of the process in using programs", "data files in a Table"</li>
<li>Insight "insight and knowledge can be obtained from ...  digitally represented information"</li>
<li>Filter systems. 'tools for finding information and recognizing patterns"</li>
<li>Application. "the preserve has two databases", "an employee wants to count the number of book"</li>
</ul>
</li>
<li>
<p>PBL, Databases, Iterative/OOP</p>
<ul>
<li>Iterative. Refers to a sequence of instructions or code being repeated until a specific end result is achieved</li>
<li>OOP. A computer programming model that organizes software design around data, or objects, rather than functions and logic</li>
<li>SQL. Structured Query Language, abbreviated as SQL, is a language used in programming, managing, and structuring data </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports-and-Flask-Objects">
<a class="anchor" href="#Imports-and-Flask-Objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Imports and Flask Objects<a class="anchor-link" href="#Imports-and-Flask-Objects"> </a>
</h2>
<blockquote>
<p>Defines and key object creations</p>
</blockquote>
<ul>
<li>Comment on where you have observed these working?  Provide a defintion of purpose.<ol>
<li>Flask app object</li>
</ol>
<ul>
<li><strong>Flask app object occurs on the line 'app = Flask(<strong>name</strong>)'. The purpose is to set up a Flask object.</strong></li>
</ul>
<ol>
<li>SQLAlchemy db object</li>
</ol>
<ul>
<li><strong>Occurs on the line 'db = SQLAlchemy()'. The purpose is to create properties for db.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">"""</span>
<span class="sd">These imports define the key objects</span>
<span class="sd">"""</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="sd">"""</span>
<span class="sd">These object and definitions are used throughout the Jupyter Notebook.</span>
<span class="sd">"""</span>

<span class="c1"># Setup of key Flask object (app)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="c1"># Setup SQLAlchemy object and properties for the database (db)</span>
<span class="n">database</span> <span class="o">=</span> <span class="s1">'sqlite:///sqlite.db'</span>  <span class="c1"># path and filename of database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_TRACK_MODIFICATIONS'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_DATABASE_URI'</span><span class="p">]</span> <span class="o">=</span> <span class="n">database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SECRET_KEY'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">()</span>


<span class="c1"># This belongs in place where it runs once per project</span>
<span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-Definition">
<a class="anchor" href="#Model-Definition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model Definition<a class="anchor-link" href="#Model-Definition"> </a>
</h2>
<blockquote>
<p>Define columns, initialization, and CRUD methods for users table in sqlite.db</p>
</blockquote>
<ul>
<li>Comment on these items in the class, purpose and defintion.<ul>
<li>class User</li>
<li><strong>Creates template for making object</strong></li>
<li>db.Model inheritance</li>
<li><strong>Creates SQLite table and database.</strong></li>
<li>
<em>init</em> method</li>
<li><strong>Constructor of the object and helps create it.</strong></li>
<li>
<code>@property</code>, <code>@&lt;column&gt;.setter</code>
</li>
<li><strong>@property establishes the values and <code>@&lt;column&gt;.setter</code> alters the values inputted.</strong></li>
<li>create, read, update, delete methods</li>
<li><strong>Common methods for a database. Adds database abilities to help us interact with the data and perform CRUD.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">""" database dependencies to support sqliteDB examples """</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randrange</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># from __init__ import app, db</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>


<span class="sd">''' Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into a Python shell and follow along '''</span>

<span class="c1"># Define the User class to manage actions in the 'users' table</span>
<span class="c1"># -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy</span>
<span class="c1"># -- a.) db.Model is like an inner layer of the onion in ORM</span>
<span class="c1"># -- b.) User represents data we want to store, something that is built on db.Model</span>
<span class="c1"># -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL</span>

<span class="c1"># Create class Score to add a scores table to database</span>
<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># Table name</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'students'</span>

    <span class="c1"># Define the columns for the table</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_college</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_gpa</span><span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_sat</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_act</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_gradDate</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>

    <span class="c1"># Construct the profile for Score</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">college</span><span class="p">,</span> <span class="n">gpa</span><span class="p">,</span> <span class="n">sat</span><span class="p">,</span> <span class="n">act</span><span class="p">,</span> <span class="n">gradDate</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()):</span> <span class="c1"># variables that record the username, score, and date of score(dos)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_college</span> <span class="o">=</span> <span class="n">college</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gpa</span> <span class="o">=</span> <span class="n">gpa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sat</span> <span class="o">=</span> <span class="n">sat</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_act</span> <span class="o">=</span> <span class="n">act</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gradDate</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># not a date type     </span>
            <span class="n">gradDate</span> <span class="o">=</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gradDate</span> <span class="o">=</span> <span class="n">gradDate</span>
    
    <span class="c1"># Getter method</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    
    <span class="c1"># Setter function</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    
    <span class="c1"># Getter method</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">college</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_college</span>
    
    <span class="c1"># Setter function</span>
    <span class="nd">@college</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">college</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">college</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_college</span> <span class="o">=</span> <span class="n">college</span>

    <span class="c1"># Getter method</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gpa</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gpa</span>
    
    <span class="c1"># Setter function</span>
    <span class="nd">@gpa</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">gpa</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpa</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gpa</span> <span class="o">=</span> <span class="n">gpa</span>

    <span class="c1"># Getter method</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sat</span>
    
    <span class="c1"># Setter function</span>
    <span class="nd">@sat</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sat</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sat</span> <span class="o">=</span> <span class="n">sat</span>

    <span class="c1"># Getter method</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">act</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_act</span>
    
    <span class="c1"># Setter function</span>
    <span class="nd">@act</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">act</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">act</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_act</span> <span class="o">=</span> <span class="n">act</span>

    <span class="c1"># Getter method</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gradDate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">gradDate_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gradDate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%m-</span><span class="si">%d</span><span class="s1">-%Y'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gradDate_string</span>
    
    <span class="c1"># Setter function</span>
    <span class="nd">@gradDate</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">gradDate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gradDate</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gradDate</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># not a date type     </span>
            <span class="n">gradDate</span> <span class="o">=</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gradDate</span> <span class="o">=</span> <span class="n">gradDate</span>

    
    
    <span class="c1"># # Convert dos to a string</span>
    <span class="c1"># @property</span>
    <span class="c1"># def dos(self):</span>
    <span class="c1">#     dos_string = self._dos.strftime('%m-%d-%Y')</span>
    <span class="c1">#     return dos_string</span>
    
    <span class="c1"># # Setter function</span>
    <span class="c1"># @dos.setter</span>
    <span class="c1"># def dos(self, dos):</span>
    <span class="c1">#     self._dos = dos</span>

    <span class="c1"># Output content using json dumps</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_dict</span><span class="p">())</span>

    <span class="c1"># CRUD operations: create, read, update, delete</span>
    <span class="c1"># CREATE: returns self and returns None if there is error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a user object from Score(db.Model) class</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add persists user object onto table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>
    
    <span class="c1"># UPDATE: updates username and score</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">college</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">gpa</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">sat</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">act</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">college</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">college</span> <span class="o">=</span> <span class="n">college</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gpa</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gpa</span> <span class="o">=</span> <span class="n">gpa</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sat</span> <span class="o">=</span> <span class="n">sat</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">act</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="n">act</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># DELETE: removes a user</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># READ: converts self to dictionary</span>
    <span class="c1"># returns a dictionary</span>
    <span class="k">def</span> <span class="nf">make_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"college"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">college</span><span class="p">,</span>
            <span class="s2">"GPA"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gpa</span><span class="p">,</span>
            <span class="s2">"SAT"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sat</span><span class="p">,</span>
            <span class="s2">"ACT"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">act</span><span class="p">,</span>
            <span class="s2">"gradDate"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gradDate</span>
        <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Initial-Data">
<a class="anchor" href="#Initial-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial Data<a class="anchor-link" href="#Initial-Data"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy db.create_all() to initialize rows into sqlite.db</p>
</blockquote>
<ul>
<li>Comment on how these work?<ol>
<li>Create All Tables from db Object</li>
</ol>
<ul>
<li><strong>Works through db.create_all()</strong></li>
</ul>
<ol>
<li>User Object Constructors</li>
</ol>
<ul>
<li><strong>Works through the Student() with the proper parameters(shown in p1 to p5)</strong></li>
</ul>
<ol>
<li>Try / Except </li>
</ol>
<ul>
<li><strong>Try works by attempting to create each object. If it doesn't work, except takes charge, removes the faulty object, and displays an error message.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">"""Database Creation and Testing """</span>


<span class="c1"># Builds working data for testing</span>
<span class="k">def</span> <span class="nf">initStudents</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">"""Create database and tables"""</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="sd">"""Tester data for table"""</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s1">'Eric'</span><span class="p">,</span> <span class="s1">'Yale'</span><span class="p">,</span> <span class="s1">'4.2'</span><span class="p">,</span> <span class="s1">'1600'</span><span class="p">,</span><span class="s1">'NA'</span><span class="p">,</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s1">'Jeff'</span><span class="p">,</span> <span class="s1">'Harvard'</span><span class="p">,</span> <span class="s1">'3.2'</span><span class="p">,</span> <span class="s1">'1540'</span><span class="p">,</span><span class="s1">'30'</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">22</span><span class="p">))</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">,</span> <span class="s1">'Palomar'</span><span class="p">,</span> <span class="s1">'4.9'</span><span class="p">,</span> <span class="s1">'1600'</span><span class="p">,</span> <span class="s1">'36'</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
        <span class="n">p4</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s1">'???'</span><span class="p">,</span> <span class="s1">'Stanford'</span><span class="p">,</span> <span class="s1">'4.5'</span><span class="p">,</span><span class="s1">'1400'</span><span class="p">,</span><span class="s1">'29'</span><span class="p">,</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
        <span class="n">p5</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s1">'Bobby'</span><span class="p">,</span> <span class="s1">'UCSD'</span><span class="p">,</span> <span class="s1">'2.0'</span><span class="p">,</span><span class="s1">'1320'</span><span class="p">,</span><span class="s1">'25'</span><span class="p">,</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

        <span class="n">profiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">,</span> <span class="n">p5</span><span class="p">]</span>

        <span class="sd">"""Builds sample user/note(s) data"""</span>
        <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">profiles</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">profile</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
                <span class="sd">'''fails with bad or duplicate data'''</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error in creating object: </span><span class="si">{</span><span class="n">profile</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
                
<span class="n">initStudents</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extra-Notes">
<a class="anchor" href="#Extra-Notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extra Notes<a class="anchor-link" href="#Extra-Notes"> </a>
</h2>
<ul>
<li>ORM</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Check-for-given-Credentials-in-users-table-in-sqlite.db">
<a class="anchor" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check for given Credentials in users table in sqlite.db<a class="anchor-link" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Use of ORM Query object and custom methods to identify user to credentials uid and password</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.filter_by</li>
</ol>
<ul>
<li><strong>Filters through the data to find and match the uid in the function's parameters.</strong></li>
</ul>
<ol>
<li>user.password</li>
</ol>
<ul>
<li><strong>Checks to see if there is a password existing for the user.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">user</span> <span class="c1"># returns user object</span>

<span class="c1"># Check credentials by finding user and verify password</span>
<span class="k">def</span> <span class="nf">check_credentials</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="c1"># query email and return user record</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">is_password</span><span class="p">(</span><span class="n">password</span><span class="p">)):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
        
<span class="c1">#check_credentials("indi", "123qwerty")</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-new-User-in-table-in-Sqlite.db">
<a class="anchor" href="#Create-a-new-User-in-table-in-Sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a new User in table in Sqlite.db<a class="anchor-link" href="#Create-a-new-User-in-table-in-Sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy and custom user.create() method to add row.</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>user.find_by_uid() and try/except</li>
</ol>
<ul>
<li><strong>Finds to see if there is already an existing uid that is the same as the inputted uid. Try stops the code if the same uid already exists. If there is no currently existing inputted uid, except makes the code continue running.</strong></li>
</ul>
<ol>
<li>user = User(...)</li>
</ol>
<ul>
<li><strong>Creates the User object.</strong></li>
</ul>
<ol>
<li>user.dob and try/except</li>
</ol>
<ul>
<li><strong>user.dob is the inputted dob. Try sets the dob in the following format. Except sets it to today and returns and error message if the date isn't inputted correctly.</strong></li>
</ul>
<ol>
<li>user.create() and try/except</li>
</ol>
<ul>
<li><strong>Creates the User object. Try creates the user. Except returns an error message if no object is created.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">():</span>
    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your name:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid name'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="n">college</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your college:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">college</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid college'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="n">gpa</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your GPA:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">gpa</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid GPA'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="n">sat</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your SAT score:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid SAT score'</span><span class="p">},</span> <span class="mi">210</span>

    <span class="n">act</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your ACT score:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">act</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid ACT score'</span><span class="p">},</span> <span class="mi">210</span>

    <span class="c1"># Initialize User object before date</span>
    <span class="n">students</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                <span class="n">college</span><span class="o">=</span><span class="n">college</span><span class="p">,</span>
                <span class="n">gpa</span><span class="o">=</span><span class="n">gpa</span><span class="p">,</span>
                <span class="n">sat</span><span class="o">=</span><span class="n">sat</span><span class="p">,</span>
                <span class="n">act</span><span class="o">=</span><span class="n">act</span>
                <span class="p">)</span>
    <span class="c1"># create user.dob, fail with today as dob</span>
    <span class="n">gradDate</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your date of graduation 'MM-DD-YYYY'"</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">students</span><span class="o">.</span><span class="n">gradDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">gradDate</span><span class="p">,</span> <span class="s1">'%m-</span><span class="si">%d</span><span class="s1">-%Y'</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">students</span><span class="o">.</span><span class="n">gradDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid date </span><span class="si">{</span><span class="n">gradDate</span><span class="si">}</span><span class="s2"> require MM-DD-YYYY, date defaulted to </span><span class="si">{</span><span class="n">students</span><span class="o">.</span><span class="n">gradDate</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Created</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">make_dict</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unknown error name </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">create</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Invalid date ahhh require MM-DD-YYYY, date defaulted to 03-19-2023
Created
 {'id': 7, 'name': 'hi', 'college': 'hi', 'GPA': 'hi', 'SAT': 'hi', 'ACT': 'hi', 'gradDate': '03-19-2023'}
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Reading-users-table-in-sqlite.db">
<a class="anchor" href="#Reading-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading users table in sqlite.db<a class="anchor-link" href="#Reading-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy query.all method to read data</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.all</li>
<li>json_ready assignment, google List Comprehension</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># SQLAlchemy extracts all users from database, turns each user into JSON</span>
<span class="k">def</span> <span class="nf">read</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">make_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span> <span class="c1"># "List Comprehensions", for each user add user.read() to list</span>
    <span class="k">return</span> <span class="n">json_ready</span>

<span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[{'id': 1,
  'name': 'Eric',
  'college': 'Yale',
  'GPA': '4.2',
  'SAT': '1600',
  'ACT': 'NA',
  'gradDate': '01-11-2023'},
 {'id': 2,
  'name': 'Jeff',
  'college': 'Harvard',
  'GPA': '3.2',
  'SAT': '1540',
  'ACT': '30',
  'gradDate': '01-22-2023'},
 {'id': 3,
  'name': 'Bob',
  'college': 'Palomar',
  'GPA': '4.9',
  'SAT': '1600',
  'ACT': '36',
  'gradDate': '06-09-2024'},
 {'id': 4,
  'name': '???',
  'college': 'Stanford',
  'GPA': '4.5',
  'SAT': '1400',
  'ACT': '29',
  'gradDate': '06-09-2024'},
 {'id': 5,
  'name': 'Bobby',
  'college': 'UCSD',
  'GPA': '2.0',
  'SAT': '1320',
  'ACT': '25',
  'gradDate': '06-10-2025'},
 {'id': 6,
  'name': 'no u',
  'college': 'Mesa College',
  'GPA': '1.0',
  'SAT': '1500',
  'ACT': '34',
  'gradDate': '06-09-2022'},
 {'id': 7,
  'name': 'hi',
  'college': 'hi',
  'GPA': 'hi',
  'SAT': 'hi',
  'ACT': 'hi',
  'gradDate': '03-19-2023'}]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hacks">
<a class="anchor" href="#Hacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hacks<a class="anchor-link" href="#Hacks"> </a>
</h1>
<ul>
<li>Add this Blog to you own Blogging site.  In the Blog add notes and observations on each code cell.</li>
<li>Change blog to your own database.</li>
<li>Add additional CRUD<ul>
<li>Add Update functionality to this blog.</li>
<li>Add Delete functionality to this blog.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Update-Functionality">
<a class="anchor" href="#Update-Functionality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Update Functionality<a class="anchor-link" href="#Update-Functionality"> </a>
</h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>

    <span class="n">nameD</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your name:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">nameD</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid name'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="n">collegeD</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your college:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">collegeD</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid college'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="n">gpaD</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your GPA:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">gpaD</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid GPA'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="n">satD</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your SAT score:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">satD</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid SAT score'</span><span class="p">},</span> <span class="mi">210</span>

    <span class="n">actD</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your ACT score:"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">actD</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Invalid ACT score'</span><span class="p">},</span> <span class="mi">210</span>
    
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="c1"># Gets the user through the username</span>
        <span class="n">profileUpdate</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_name</span> <span class="o">=</span> <span class="n">nameD</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">profileUpdate</span><span class="p">:</span>
            <span class="c1"># Updates the score for the user</span>
            <span class="n">profileUpdate</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">college</span> <span class="o">=</span> <span class="n">collegeD</span><span class="p">)</span>
            <span class="n">profileUpdate</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">gpa</span> <span class="o">=</span> <span class="n">gpaD</span><span class="p">)</span>
            <span class="n">profileUpdate</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">act</span> <span class="o">=</span> <span class="n">actD</span><span class="p">)</span>
            <span class="n">profileUpdate</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sat</span> <span class="o">=</span> <span class="n">satD</span><span class="p">)</span>
            <span class="c1"># Returns a dictionary to confirm that the score was updated</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Updated:"</span><span class="p">,</span> <span class="n">profileUpdate</span><span class="o">.</span><span class="n">make_dict</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Error message if update fails</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">nameD</span><span class="si">}</span><span class="s2"> not found"</span><span class="p">)</span>

<span class="n">update</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Updated: {'id': 6, 'name': 'no u', 'college': 'Dartmouth', 'GPA': '5.0', 'SAT': '1600', 'ACT': '36', 'gradDate': '06-09-2022'}
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Delete-Functionality">
<a class="anchor" href="#Delete-Functionality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Delete Functionality<a class="anchor-link" href="#Delete-Functionality"> </a>
</h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">():</span>

    <span class="c1"># Gets the ID</span>
    <span class="n">getID</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">"Enter the ID of the profile:"</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="c1"># Gets the user through the ID</span>
        <span class="n">profileDelete</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">getID</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">profileDelete</span><span class="p">:</span>
            <span class="c1"># Deletes the user according to its ID number</span>
            <span class="n">profileDelete</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Profile #</span><span class="si">{</span><span class="n">getID</span><span class="si">}</span><span class="s2"> deleted"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Error message if delete fails</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Profile #</span><span class="si">{</span><span class="n">getID</span><span class="si">}</span><span class="s2"> not found"</span><span class="p">)</span>
    
<span class="n">delete</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Profile #1 deleted
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/tmp/ipykernel_15236/78855563.py:7: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
  profileDelete = Student.query.get(getID)
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/VSCode-Fastpages/jupyter/week%2026/2023/03/13/AP-unit2-4a.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/VSCode-Fastpages/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://a1234l.github.io/VSCode-Fastpages/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/VSCode-Fastpages/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>This is my blogging platform for my Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href=" https://github.com/A1234l " target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/VSCode-Fastpages/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href=" https://twitter.com/NighthawkCodin " target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/VSCode-Fastpages/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href=" https://www.youtube.com/channel/UC1akV2IlxiXWLUxzQX0slmw/featured " target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/VSCode-Fastpages/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
